1. ภาพรวมและเป้าหมายของโหมด
สร้างโหมดเกมใหม่ชื่อ "Sentence Typing" โดยผู้ใช้จะต้องพิมพ์ประโยคภาษาอังกฤษและคำแปลภาษาไทยให้ถูกต้องตามต้นฉบับ เมื่อพิมพ์สำเร็จทั้งสองภาษา จะได้รับ 1 คะแนนและระบบจะสุ่มประโยคถัดไปให้โดยอัตโนมัติ โหมดนี้เน้นความแม่นยำในการพิมพ์ โดยไม่มีการจับเวลา

2. กลไกหลักและประสบการณ์ผู้ใช้ (User Experience)
การเริ่มเกม: เมื่อผู้ใช้เลือกโหมด "Sentence Typing" ระบบจะสุ่มประโยคมาจากไฟล์ data/sentences.json

การแสดงผล:

หน้าจอจะแสดง ประโยคภาษาอังกฤษ (ต้นฉบับ) และ ประโยคภาษาไทย (คำแปล) เพื่อให้ผู้ใช้ดู

สำหรับพิมพ์ ซึ่งผู้ใช้ต้องพิมพ์ประโยคภาษาอังกฤษ และคำแปลตามลำดับให้ตรงกัน

การพิมพ์ภาษาอังกฤษ:

ขณะที่ผู้ใช้พิมพ์ ระบบจะเปรียบเทียบตัวอักษรแบบ Real-time

ตัวอักษรที่พิมพ์ถูก จะแสดงเป็น สีเขียว

ตัวอักษรที่พิมพ์ผิด จะแสดงเป็น สีแดง

การพิมพ์ภาษาไทย:

เมื่อผู้ใช้พิมพ์ประโยคภาษาอังกฤษถูกต้องครบถ้วนแล้ว:

ระบบจะขึ้นบรรทัดใหม่ พร้อมสำหรับการพิมพ์คำแปลภาษาไทย

การตรวจสอบความถูกต้องของการพิมพ์ภาษาไทยจะใช้กลไกเดียวกัน (ตัวอักษรถูกเป็นสีเขียว, ผิดเป็นสีแดง)

การจบข้อและไปต่อ:

เมื่อผู้ใช้พิมพ์ภาษอังกฤษและคำแปลภาษาไทยได้ถูกต้องสมบูรณ์ จะถือว่า "ตอบถูก"

ระบบจะ บวกคะแนนให้ 1 คะแนน

เพิ่มรายการลงในประวัติการตอบ (History)

จากนั้นระบบจะ สุ่มประโยคใหม่ และเริ่มขั้นตอนที่ 2 อีกครั้งโดยอัตโนมัติ

3. สิ่งที่ต้องทำ (Technical Requirements) ในแต่ละไฟล์
เขียนไฟล์ใหม่: modes/sent_type.js
ไฟล์นี้จะควบคุมตรรกะทั้งหมดของโหมดใหม่ โดยต้องมีโครงสร้างตามรูปแบบเดิม:

id: 'sent_typing'

rule: 'พิมพ์ประโยคภาษาอังกฤษและภาษาไทยให้ถูกต้องตามต้นฉบับ'

next(data): ฟังก์ชันสำหรับเตรียมคำถาม

สุ่มประโยค 1 ประโยคจาก data.sentences

เรียกใช้ฟังก์ชันใน ui.js เพื่อแสดงประโยคต้นฉบับ (อังกฤษ) และเตรียมช่องพิมพ์

checkAnswer(): ในโหมดนี้ การตรวจสอบจะเกิดขึ้นแบบ Real-time ที่ฝั่ง ui.js ดังนั้นฟังก์ชันนี้อาจจะไม่ถูกใช้งานโดยตรงเมื่อกดปุ่ม Enter แต่จะถูกเรียกใช้เมื่อพิมพ์สำเร็จเพื่อสั่งให้ app.js บวกคะแนนและไปข้อถัดไป

แก้ไขไฟล์: app.js
Import โหมดใหม่จาก ./modes/sent_type.js

เพิ่ม โหมดที่ Import เข้ามาในรายการโหมดทั้งหมดของแอปพลิเคชัน เพื่อให้ผู้ใช้สามารถเลือกเล่นได้

แก้ไขไฟล์: ui.js
ส่วนนี้ต้องแก้ไขและเพิ่มฟังก์ชันมากที่สุด เพื่อรองรับการแสดงผลแบบ Real-time

สร้างฟังก์ชันใหม่ สำหรับการตั้งค่า UI ของโหมด Typing โดยเฉพาะ เช่น setupTypingUI(sentencePair)

สร้างฟังก์ชันใหม่ handleTyping(event) เพื่อ:

รับค่าจากช่องพิมพ์ทุกครั้งที่มีการกดคีย์บอร์ด

เปรียบเทียบข้อความที่ผู้ใช้พิมพ์กับประโยคต้นฉบับ

จัดการแสดงผลตัวอักษรที่ถูก (สีเขียว) และผิด (สีแดง)

ตรวจจับเมื่อผู้ใช้พิมพ์ประโยคสำเร็จ เพื่อสลับไปพิมพ์ภาษาไทย หรือเพื่อแจ้ง app.js ว่าข้อนี้ทำสำเร็จแล้ว

อ้างอิง Element ใหม่ จาก index.html ที่จะสร้างขึ้นสำหรับโหมดนี้

แก้ไขไฟล์: index.html
เพิ่มโครงสร้าง HTML สำหรับโหมด "Sentence Typing" ซึ่งควรจะถูกซ่อนไว้เป็นค่าเริ่มต้น ประกอบด้วย:

<div> สำหรับแสดงประโยคต้นฉบับ (ภาษาอังกฤษ)

<div> สำหรับแสดงประโยคต้นฉบับ (ภาษาไทย)

<div> ที่จะใช้แสดงผลลัพธ์การพิมพ์ของผู้ใช้ (ที่เปลี่ยนสีได้)

<input> หรือ <textarea> ที่เป็นช่องพิมพ์จริงๆ (อาจจะซ่อนไว้แล้วดักจับ event แทน)

แก้ไขไฟล์: style.css
เพิ่ม CSS rules สำหรับตกแต่ง UI ของโหมดใหม่:

สไตล์สำหรับแสดงประโยคต้นฉบับ

สร้างคลาส .correct-char (เช่น color: #a5d6a7;) สำหรับตัวอักษรที่พิมพ์ถูก

สร้างคลาส .incorrect-char (เช่น color: #ef9a9a;) สำหรับตัวอักษรที่พิมพ์ผิด

สไตล์สำหรับ Cursor หรือตำแหน่งการพิมพ์ปัจจุบัน

ไฟล์ที่ไม่ต้องแก้ไข
data/sentences.json: ใช้ข้อมูลจากไฟล์นี้ แต่ไม่ต้องแก้ไข

data/vocabulary.json: ไม่เกี่ยวข้องกับโหมดนี้